<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora de Comisiones ONCE 2025</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f9f9f9;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #0077cc;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 0.2rem;
    }
    select {
      width: 100%;
      padding: 8px;
      margin-top: 0.2rem;
    }
    button {
      margin-top: 1rem;
      padding: 10px;
      width: 100%;
      background-color: #0077cc;
      color: white;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }
    button:hover {
      background-color: #005fa3;
    }
    .resultado, .resumen {
      margin-top: 2rem;
      padding: 1rem;
      background: white;
      border: 1px solid #ccc;
    }
    .dias {
      margin-top: 2rem;
    }
    .dias label {
      margin-top: 0.5rem;
    }
    .footer {
      text-align: center;
      font-size: 0.8rem;
      margin-top: 3rem;
      color: #999;
    }
  </style>
</head>
<body>

  <h1>Calculadora de Comisiones ONCE 2025</h1>

  <div class="dias">
    <label for="dia">Selecciona el d√≠a:</label>
    <select id="dia">
      <option value="lunes">Lunes</option>
      <option value="martes">Martes</option>
      <option value="mi√©rcoles">Mi√©rcoles</option>
      <option value="jueves">Jueves</option>
      <option value="viernes">Viernes</option>
      <option value="s√°bado">S√°bado</option>
      <option value="domingo">Domingo</option>
    </select>

    <label>Diarios vendidos (2‚ÄØ‚Ç¨):</label>
    <input type="number" id="diario" min="0" value="0" />

    <label>Cuponazos vendidos (3‚ÄØ‚Ç¨):</label>
    <input type="number" id="cuponazo" min="0" value="0" />

    <label>Sueldazos vendidos (2‚ÄØ‚Ç¨):</label>
    <input type="number" id="sueldazo" min="0" value="0" />

    <label>Total Rascas vendidos (‚Ç¨):</label>
    <input type="number" id="rascas" min="0" value="0" step="0.01" />

    <label>Total Productos Activos (‚Ç¨):</label>
    <input type="number" id="activos" min="0" value="0" step="0.01" />

    <button onclick="guardarVentas()">üíæ Guardar ventas del d√≠a</button>
    <button onclick="verResumen()">üìÜ Ver resumen del mes</button>
    <button onclick="borrarDatos()">üóëÔ∏è Borrar todo</button>
  </div>

  <div class="resumen" id="resumen"></div>

  <div class="footer">
    Desarrollado por Luis Miguel ‚Äì ONCE 2025
  </div>

  <script>
    const umbralPorDia = 210; // m√≠nimo diario para comisiones

    function guardarVentas() {
      const dia = document.getElementById("dia").value;
      const diario = parseInt(document.getElementById("diario").value) || 0;
      const cuponazo = parseInt(document.getElementById("cuponazo").value) || 0;
      const sueldazo = parseInt(document.getElementById("sueldazo").value) || 0;
      const rascas = parseFloat(document.getElementById("rascas").value) || 0;
      const activos = parseFloat(document.getElementById("activos").value) || 0;

      const ventas = {
        diario,
        cuponazo,
        sueldazo,
        rascas,
        activos
      };

      localStorage.setItem("ventas_" + dia, JSON.stringify(ventas));
      alert("‚úÖ Ventas guardadas para " + dia.charAt(0).toUpperCase() + dia.slice(1));
    }

    function verResumen() {
      let totalEuros = 0;
      let diasTrabajados = 0;

      const resumenHTML = [];

      const dias = ["lunes", "martes", "mi√©rcoles", "jueves", "viernes", "s√°bado", "domingo"];
      dias.forEach(dia => {
        const data = JSON.parse(localStorage.getItem("ventas_" + dia));
        if (data) {
          diasTrabajados++;
          const euros =
            data.diario * 2 +
            data.cuponazo * 3 +
            data.sueldazo * 2 +
            data.rascas +
            data.activos;

          resumenHTML.push(`<strong>${dia.charAt(0).toUpperCase() + dia.slice(1)}</strong>: ${euros.toFixed(2)}‚ÄØ‚Ç¨`);
          totalEuros += euros;
        }
      });

      const objetivo = diasTrabajados * umbralPorDia;
      const porcentaje = Math.min(((totalEuros / objetivo) * 100).toFixed(1), 100);

      const resumenDiv = document.getElementById("resumen");
      resumenDiv.innerHTML = `
        <h3>Resumen mensual</h3>
        ${resumenHTML.join("<br>")}
        <hr>
        <strong>Total vendido:</strong> ${totalEuros.toFixed(2)}‚ÄØ‚Ç¨<br>
        <strong>D√≠as trabajados:</strong> ${diasTrabajados}<br>
        <strong>Objetivo m√≠nimo:</strong> ${objetivo.toFixed(2)}‚ÄØ‚Ç¨<br>
        <strong>Progreso:</strong> ${porcentaje}%<br>
        <strong>Comisi√≥n estimada:</strong> ${totalEuros >= objetivo ? (totalEuros * 0.077).toFixed(2) + " ‚Ç¨" : "0 ‚Ç¨ (no alcanzado)"}<br>
      `;
    }

    function borrarDatos() {
      if (confirm("¬øSeguro que quieres borrar todos los datos del mes?")) {
        const dias = ["lunes", "martes", "mi√©rcoles", "jueves", "viernes", "s√°bado", "domingo"];
        dias.forEach(dia => localStorage.removeItem("ventas_" + dia));
        document.getElementById("resumen").innerHTML = "";
        alert("Datos borrados correctamente.");
      }
    }
  </script>
</body>
</html>
