<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora ONCE 2025</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 { color: #005a9c; }
    label { display: block; margin-top: 10px; }
    select, input {
      padding: 5px;
      width: 100%;
      max-width: 300px;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      background: #005a9c;
      color: white;
      border: none;
      cursor: pointer;
    }
    #resultado {
      margin-top: 20px;
      font-weight: bold;
      background: #fff;
      padding: 15px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>Calculadora de Comisiones ONCE 2025</h1>

  <label for="producto">Tipo de producto:</label>
  <select id="producto" onchange="cargarOpciones()">
    <option value="diario">Diario</option>
    <option value="cuponazo">Cuponazo</option>
    <option value="sueldazo">Sueldazo</option>
    <option value="rascas">Rascas</option>
    <option value="activos">Productos Activos</option>
    <option value="extra">Extraordinario</option>
  </select>

  <label for="dias">DÃ­as trabajados (1-26):</label>
  <input type="number" id="dias" min="1" max="26" value="20" />

  <label for="cupones">Cupones vendidos:</label>
  <input type="number" id="cupones" min="1" />

  <label for="precio">Precio por cupÃ³n (â‚¬):</label>
  <select id="precio"></select>

  <button onclick="calcularComision()">Calcular ComisiÃ³n</button>

  <div id="resultado"></div>

  <script>
    const precios = {
      diario: [2],
      cuponazo: [3],
      sueldazo: [2],
      rascas: [1, 2, 3, 5, 10],
      activos: [0.5, 1, 2],
      extra: [2]
    };

    function cargarOpciones() {
      const producto = document.getElementById("producto").value;
      const precio = document.getElementById("precio");
      precio.innerHTML = "";

      precios[producto].forEach(p => {
        const option = document.createElement("option");
        option.value = p;
        option.textContent = p.toFixed(2) + " â‚¬";
        precio.appendChild(option);
      });
    }

    function calcularComision() {
      const producto = document.getElementById("producto").value;
      const dias = parseInt(document.getElementById("dias").value);
      const cupones = parseInt(document.getElementById("cupones").value);
      const precio = parseFloat(document.getElementById("precio").value);
      const resultado = document.getElementById("resultado");

      if (!cupones || cupones <= 0 || dias <= 0 || dias > 26) {
        resultado.textContent = "Introduce datos vÃ¡lidos.";
        return;
      }

      const minimo = dias * 142;
      const umbral = dias * 210;
      const totalVenta = cupones * precio;
      let porcentaje = 0;

      if (producto === "extra") {
        if (cupones >= 600) porcentaje = 17;
        else if (cupones >= 500) porcentaje = 16;
        else if (cupones >= 400) porcentaje = 15;
        else if (cupones >= 300) porcentaje = 14;
        else if (cupones >= 200) porcentaje = 13;
        else if (cupones >= 1) porcentaje = 12;
      } else {
        if (producto === "diario") {
          if (totalVenta >= umbral) porcentaje = 17.5;
          else if (totalVenta >= minimo) porcentaje = 7;
        } else if (producto === "cuponazo") {
          if (totalVenta >= umbral) porcentaje = 15;
          else if (totalVenta >= minimo) porcentaje = 6;
        } else if (producto === "sueldazo") {
          if (totalVenta >= umbral) porcentaje = 15;
          else if (totalVenta >= minimo) porcentaje = 6;
        } else if (producto === "rascas") {
          if (totalVenta >= umbral) porcentaje = 10.5;
          else if (totalVenta >= minimo) porcentaje = 4.5;
        } else if (producto === "activos") {
          if (totalVenta >= umbral) porcentaje = 10.5;
          else if (totalVenta >= minimo) porcentaje = 4.5;
        }
      }

      const ganancia = (totalVenta * porcentaje / 100).toFixed(2);

      resultado.innerHTML = `
        <p>ðŸ”¢ Vendidos: <strong>${cupones}</strong> cupones Ã— <strong>${precio.toFixed(2)} â‚¬</strong> = <strong>${totalVenta.toFixed(2)} â‚¬</strong></p>
        <p>ðŸ“… DÃ­as: ${dias} â†’ MÃ­nimo: ${minimo.toFixed(2)} â‚¬ | Umbral: ${umbral.toFixed(2)} â‚¬</p>
        <p>ðŸ“ˆ ComisiÃ³n: <strong>${porcentaje}%</strong></p>
        <p>ðŸ’° Ganancia estimada: <strong>${ganancia} â‚¬</strong></p>
      `;
    }

    cargarOpciones();
  </script>
</body>
</html>
